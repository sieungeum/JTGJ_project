<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jtgz.jtgzproject.board.dao.IBoardDAO">

	<select id="getBoardList" resultType="com.jtgz.jtgzproject.board.dto.BoardDTO">
		SELECT
			  a.board_no
			, a.board_title
			, a.mem_id
			, b.mem_name
			, a.board_content
			, TO_CHAR(a.board_date, 'MM.dd') AS board_date
		FROM
			  boards a
			, members b
		WHERE 1=1
			AND a.mem_id = b.mem_id
	</select>
	
	<insert id="writeBoard" parameterType="com.jtgz.jtgzproject.board.dto.BoardDTO">
		INSERT INTO boards(
			  board_no
			, board_title
			, mem_id
			, board_content
			, board_date
		) VALUES(
			  (SELECT COUNT(*)+1 FROM boards)
			, #{boardTitle}
			, #{memId}
			, #{boardContent}
			, SYSDATE
		)
	</insert>

	<select id="getBoard" resultType="com.jtgz.jtgzproject.board.dto.BoardDTO" parameterType="int">
		SELECT
			  a.board_no
			, a.board_title
			, a.mem_id
			, b.mem_name
			, a.board_content
			, TO_CHAR(a.board_date, 'yyyy.MM.dd hh24:mm') AS board_date
		FROM
			  boards a
			, members b
		WHERE 1=1
			AND a.mem_id = b.mem_id
			AND a.board_no = #{boardNO}
	</select>	
	
	<update id="editBoard" parameterType="com.jtgz.jtgzproject.board.dto.BoardDTO">
		UPDATE
			boards
		SET
			  board_title = #{boardTitle}
			, board_content = #{boardContent}
		WHERE 1=1
			AND board_no = #{boardNo}
	</update>



</mapper>